複数の言語で一つのプログラムを書くということ(WIP)
====================================================


:tags: chimera, software design, python
:category: software
:authors: cocuh
:slug: chimera
:lang: ja
:date: 2016-08-10 21:55

1つのプロジェクトが1つの言語で完結することが少なくなっています．
webアプリケーションで例えれば，backendはPythonで書き，frontendはJavaScriptを使っているなどです．
このような1つのプロジェクトに複数の言語が混在させるソフトウェア設計論について，あまり多く議論されてきませんでした．

本記事の内容は以下のようになっています．
..

  TODO

この記事の内容は `PyConJp 2016 <https://pycon.jp/2016/ja/schedule/presentation/33/>`__ にて発表予定です．


読むのに必要なスキル
~~~~~~~~~~~~~~~~~~~~~
- Pythonが読める
- Python以外の言語に触ったことのある

.. PELICAN_END_SUMMARY


Why I focus it.
---------------

私の研究の中でNP困難な問題を解く必要がでてきました．
並列計算をする必要がありGILのあるPythonのみでは困難です．
これでの研究はすべてPythonとIPython notebook上で行っているため，これまでの資産がありました．
この資産を捨て，Python以外の言語で再実装するのはナンセンスです．
そのため，NP困難な問題のソルバーをRustやCythonを用いて実装し，Pythonから実行可能にすることを考えます．

より抽象的に考えた際に，プログラミング言語それぞれの文法・文化・ライブラリに対し得意/不得意が存在すると考えることができます．
さきほどは，Pythonの不得意な処理(並列処理)に関しては，並列処理の得意なRustを用いて実装するという手段を取りました．
同様に，actor modelのような並行処理を行うプログラムを書く場合，Pythonよりerlangを用いて記述したくなりますが，実際の処理の部分はライブラリの豊富なPythonで実装したいです．
このように，あるコンポーネントはある言語で書きたいが，ほかのコンポーネントは別の言語で書きたいという欲求がでてきます．

本記事ではこのような，別々の言語で実装されたコンポーネントを組合せ，一つのプロジェクトを実現するプログラミング技法を議論します．

Chimera
-------

本記事では， **複数の言語が組み合わさった状態** を **キメラ** と呼ぶこととします．
厳密風な定義もいくつか考えましたが，しっくりこなかったのでゆるい定義となってます．

キメラなプロジェクトの例としてnumpyが挙げられます．

https://github.com/numpy/numpy

.. image:: {attach}numpy.png

たとえばこんな感じに，CとPythonで書かれているのがわかります．
これは速度と計算資源の有効活用のためで，コアな部分はCで書き，そのまわりは人間が書きやすいPythonで書くようにしています．

もう一つ別の例では，webアプリケーションが挙げられます．
serverサイドがRailsであってもclientサイドはJavaScriptのようにです．
これは，serverサイドはHTTPが喋れれば何でもいいですが，clientサイドはブラウザが(基本的に)JavaScriptのみしか動かないためです．

このように，多くのアプリケーションは複数の言語でかかれています．
これは，言語ごとに特徴が異なるため使い分けが為されているためです．



Chimeraの種類
----------------


..
    .. math::
        x^2

..
    inline :math:`x^2`
